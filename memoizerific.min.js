!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.memoize=t()}(this,function(){"use strict";function e(e,t){var n,r,f,o=e.length,i=t.length;for(r=o-1;r>=0;r--){for(n=!0,f=0;i>f;f++)if(e[r][f]!==t[f]){n=!1;break}if(n)break}e.push(e.splice(r,1)[0])}function t(e,t){var n,r,f=t.length,o=e,i=[o];for(r=0;f-1>r;r++)o=o.get(t[r]),i.push(o);for(r=f-1;r>=0&&(n=i[r].get(t[r]),!n||!n.size);r--)i[r]["delete"](t[r])}return function(n){var r=new Map,f=[];return function(o){var i=function(){var i,u,s,a=r,p=arguments.length,c=Array(p),h=!0;for(s=0;p>s;s++)c[s]=arguments[s],a.has(c[s])?a=a.get(c[s]):(h=!1,p-1>s?(i=new Map,a.set(c[s],i),a=i):(u=o.apply(o,c),a.set(c[s],u),a=u,n&&n>0&&(f.push(c),f.length>n&&t(r,f.shift()))));return h&&n&&e(f,c),a};return i}}});